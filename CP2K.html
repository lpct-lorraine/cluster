<html>
<head><title>CP2K</title></head>
<body>
<h1>CP2K</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#official_web_site"><span class="tocnumber">1</span> <span class="toctext">official web site</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Installation_sur_lecce11_et_lecce12"><span class="tocnumber">1.1</span> <span class="toctext">Installation sur lecce11 et lecce12</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Compilation"><span class="tocnumber">1.2</span> <span class="toctext">Compilation</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Test_on_Explor_with_an_interactive_session"><span class="tocnumber">1.3</span> <span class="toctext">Test on Explor with an interactive session</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="official_web_site">official web site</span></h1>
<p><a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="https://www.cp2k.org/">https://www.cp2k.org/</a>
</p><p><br />
</p>
<h2><span class="mw-headline" id="Installation_sur_lecce11_et_lecce12">Installation sur lecce11 et lecce12</span></h2>
<pre>
[root@lecce11 fpascale]# yum install cp2k
Loaded plugins: fastestmirror, refresh-packagekit, security
Setting up Install Process
Loading mirror speeds from cached hostfile
epel/metalink                                                                                                                                                     |  24 kB     00:00     
 * epel: mirrors.ircam.fr
 * sl: ftp.scientificlinux.org
 * sl-security: ftp.scientificlinux.org
 * sl6x: ftp.scientificlinux.org
 * sl6x-security: ftp.scientificlinux.org
sl                                                                                                                                                                | 3.7 kB     00:00     
sl-livecd-extra                                                                                                                                                   | 2.5 kB     00:00     
sl-security                                                                                                                                                       | 2.9 kB     00:00     
sl6x                                                                                                                                                              | 3.7 kB     00:00     
sl6x-security                                                                                                                                                     | 2.9 kB     00:00     
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package cp2k.x86_64 0:2.4-3.20140428svn13818.el6 will be installed
--&gt; Processing Dependency: libint = 1.1.5-3.el6 for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: cp2k-common = 2.4-3.20140428svn13818.el6 for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libxc.so.1()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: liblapack.so.3()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libint-stable.so.1()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libfftw3_threads.so.3()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libfftw3.so.3()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libf77blas.so.3()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libderiv-stable.so.1()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Processing Dependency: libatlas.so.3()(64bit) for package: cp2k-2.4-3.20140428svn13818.el6.x86_64
--&gt; Running transaction check
---&gt; Package atlas.x86_64 0:3.8.4-2.el6 will be installed
---&gt; Package cp2k-common.x86_64 0:2.4-3.20140428svn13818.el6 will be installed
---&gt; Package fftw.x86_64 0:3.2.1-3.1.el6 will be installed
---&gt; Package libderiv.x86_64 0:1.1.5-3.el6 will be installed
---&gt; Package libint.x86_64 0:1.1.5-3.el6 will be installed
---&gt; Package libxc.x86_64 0:2.1.2-3.el6 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

=========================================================================================================================================================================================
 Package                                    Arch                                  Version                                                      Repository                           Size
=========================================================================================================================================================================================
Installing:
 cp2k                                       x86_64                                2.4-3.20140428svn13818.el6                                   epel                                 13 M
Installing for dependencies:
 atlas                                      x86_64                                3.8.4-2.el6                                                  sl                                  2.8 M
 cp2k-common                                x86_64                                2.4-3.20140428svn13818.el6                                   epel                                 18 k
 fftw                                       x86_64                                3.2.1-3.1.el6                                                sl                                  1.2 M
 libderiv                                   x86_64                                1.1.5-3.el6                                                  epel                                 10 M
 libint                                     x86_64                                1.1.5-3.el6                                                  epel                                 32 M
 libxc                                      x86_64                                2.1.2-3.el6                                                  epel                                504 k

Transaction Summary
=========================================================================================================================================================================================
Install       7 Package(s)

Total download size: 60 M
Installed size: 311 M

</pre>
<h2><span class="mw-headline" id="Compilation">Compilation</span></h2>
<pre>
module load gcc/7.1.0
./install_cp2k_toolchain.sh --enable-omp --with-gcc=system --with-binutils=install --with-make --with-cmake --with-valgrind --with-lcov=no --with-openmpi=install --with-libxc=install --with-fftw=install --with-openblas=install --with-scalapack=install --with-libsmm=no

Installing from scratch into /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/libxsmm-1.9.0
==================== generating arch files ====================
arch files can be found in the /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/arch subdirectory
Wrote /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/arch/local.sopt
Wrote /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/arch/local.sdbg
Wrote /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/arch/local.ssmp
========================== usage =========================
Done!
Now copy:
  cp /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/arch/* to the cp2k/arch/ directory
To use the installed tools and libraries and cp2k version
compiled with it you will first need to execute at the prompt:
  source /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/setup
To build CP2K you should change directory:
  cd cp2k/makefiles/
  make -j 8 ARCH=local VERSION="sopt sdbg ssmp"



cd ..
cp /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/arch/* arch/
source /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/setup
make -j 8 ARCH=local VERSION="sopt sdbg ssmp popt pdbg psmp"

[ged01@cne06 cp2k-6.1-fabien]$ ls exe/local/
cp2k.pdbg        cp2k.sopt             dbcsr_example_2.psmp  dbcsr_performance_driver.pdbg  dbcsr_tensor_unittest.sopt       dbcsr_unittest.psmp  libcp2k_unittest.pdbg
cp2k.popt        cp2k.ssmp             dbcsr_example_2.sdbg  dbcsr_performance_driver.popt  dbcsr_tensor_unittest.ssmp       dbcsr_unittest.sdbg  libcp2k_unittest.popt
cp2k.psmp        dbcsr_example_1.pdbg  dbcsr_example_2.sopt  dbcsr_performance_driver.psmp  dbcsr_test_csr_conversions.pdbg  dbcsr_unittest.sopt  libcp2k_unittest.psmp
cp2k.sdbg        dbcsr_example_1.popt  dbcsr_example_2.ssmp  dbcsr_performance_driver.sdbg  dbcsr_test_csr_conversions.popt  dbcsr_unittest.ssmp  libcp2k_unittest.sdbg
cp2k_shell.pdbg  dbcsr_example_1.psmp  dbcsr_example_3.pdbg  dbcsr_performance_driver.sopt  dbcsr_test_csr_conversions.psmp  graph.pdbg           libcp2k_unittest.sopt
cp2k_shell.popt  dbcsr_example_1.sdbg  dbcsr_example_3.popt  dbcsr_performance_driver.ssmp  dbcsr_test_csr_conversions.sdbg  graph.popt           libcp2k_unittest.ssmp
cp2k_shell.psmp  dbcsr_example_1.sopt  dbcsr_example_3.psmp  dbcsr_tensor_unittest.pdbg     dbcsr_test_csr_conversions.sopt  graph.psmp
cp2k_shell.sdbg  dbcsr_example_1.ssmp  dbcsr_example_3.sdbg  dbcsr_tensor_unittest.popt     dbcsr_test_csr_conversions.ssmp  graph.sdbg
cp2k_shell.sopt  dbcsr_example_2.pdbg  dbcsr_example_3.sopt  dbcsr_tensor_unittest.psmp     dbcsr_unittest.pdbg              graph.sopt
cp2k_shell.ssmp  dbcsr_example_2.popt  dbcsr_example_3.ssmp  dbcsr_tensor_unittest.sdbg     dbcsr_unittest.popt              graph.ssmp

</pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Test_on_Explor_with_an_interactive_session">Test on Explor with an interactive session</span></h2>
<pre>
 srun -p hf -t 2:00:00 -N1 -n 8 --exclusive --pty bash 

[ged01@cne12 cp2k-6.1-fabien]$ cd INPUT_CP2K/
[ged01@cne12 INPUT_CP2K]$ module load gcc/7.1.0
[ged01@cne12 INPUT_CP2K]$ source /home/pmg89/shared/cp2k-6.1-fabien/tools/toolchain/install/setup
[ged01@cne12 INPUT_CP2K]$ mpirun -np 8 /home/pmg89/shared/cp2k-6.1-fabien/exe/local/cp2k.popt -i cp2k.MD.inp -o cp2k.MD.out 

top - 17:47:07 up 125 days, 14 min,  1 user,  load average: 6.62, 2.40, 1.90
Tasks: 557 total,  10 running, 547 sleeping,   0 stopped,   0 zombie
%Cpu(s): 99.4 us,  0.6 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.0 hi, 0.0 si,  0.0 st
KiB Mem&#160;: 13191993+total, 12380684+free,  6273304 used,  1839784 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 12379688+avail Mem

   PID USER      PR  NI    VIRT    RES    SHR S &#160;%CPU&#160;%MEM TIME+ COMMAND
 54025 ged01     20   0 1134068 693284  16572 R 100.3  0.5 1:42.54 cp2k.popt
 54026 ged01     20   0 1140680 699592  16564 R 100.3  0.5 1:42.53 cp2k.popt
 54029 ged01     20   0 1136320 683120  16572 R 100.3  0.5 1:42.36 cp2k.popt
 54022 ged01     20   0 1154772 700536  16756 R 100.0  0.5 1:42.49 cp2k.popt
 54024 ged01     20   0 1130244 689188  16612 R 100.0  0.5 1:42.55 cp2k.popt
 54027 ged01     20   0 1127956 674912  16688 R 100.0  0.5 1:42.54 cp2k.popt
 54028 ged01     20   0 1129652 677428  16580 R 100.0  0.5 1:42.54 cp2k.popt
 54023 ged01     20   0 1134828 679028  16668 R  99.7  0.5 1:42.48 cp2k.popt 
</pre>




</body></html>