<html>
<head><title>Python</title></head>
<body>
<h1>Python</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Env_python_pour_Terachem-namd"><span class="tocnumber">1</span> <span class="toctext">Env python pour Terachem-namd</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#probl.C3.A8me"><span class="tocnumber">1.1</span> <span class="toctext">problème</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Env_d.C3.A9di.C3.A9"><span class="tocnumber">1.2</span> <span class="toctext">Env dédié</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Cr.C3.A9er_un_environnement_pour_python_3.6"><span class="tocnumber">2</span> <span class="toctext">Créer un environnement pour python 3.6</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Installer_une_bibiloth.C3.A8que_python_dans_son_HOME"><span class="tocnumber">3</span> <span class="toctext">Installer une bibilothèque python dans son HOME</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Env_python_pour_Terachem-namd">Env python pour Terachem-namd</span></h1>
<h2><span class="mw-headline" id="probl.C3.A8me">problème</span></h2>
<p>/auto/tms6/amonari/NAMD_QMMM_EX
</p>
<pre>
amonari@gpu4-01:~/NAMD_QMMM_EX$ module load TeraChem/1.94V
amonari@gpu4-01:~/NAMD_QMMM_EX$ /auto/tms6/amonari/run.terachem//namd/namd2 +p2 ss1.conf
...
TCL: Minimizing for 0 steps
Info: List of ranks running QM simulations: 0.
Traceback (most recent call last):
  File "/auto/tms6/amonari/NAMD_QMMM_EX/run_terachem.py", line 38, in &lt;module&gt;
    from scipy import spatial
ImportError: No module named 'scipy'
FATAL ERROR: Error running command for QM forces calculation.
------------- Processor 0 Exiting: Called CmiAbort ------------
Reason: FATAL ERROR: Error running command for QM forces calculation.

</pre>
<h2><span class="mw-headline" id="Env_d.C3.A9di.C3.A9">Env dédié</span></h2>
<p>virtualenv -p $(which python3) envname
</p>
<pre>
[fpascale@visu10 ~]$ source /auto/soft/python/3.5/bin/activate
pip install scipy

</pre>
<p><br />
solution
</p>
<pre>
Just replace the first line in run_terachem.py by

#!/auto/soft/python/3.5/bin/python
</pre>
<pre>
Info: PME GRID LOCATIONS: 0 1
Info: PME TRANS LOCATIONS: 0 1
Info: PME USING 1 GRID NODES AND 1 TRANS NODES
Info: Optimizing 4 FFT steps.  1... 2... 3... 4...   Done.
Info: Startup phase 7 took 0.000584126 s, 253.449 MB of memory in use
Info: Startup phase 8 took 0.000138044 s, 253.449 MB of memory in use
LDB: Central LB being created...
Info: Startup phase 9 took 0.000150919 s, 253.449 MB of memory in use
Info: CREATING 614 COMPUTE OBJECTS
Info: useSync: 0 useProxySync: 0
Info: Startup phase 10 took 0.00185704 s, 253.965 MB of memory in use
Info: Startup phase 11 took 9.39369e-05 s, 253.965 MB of memory in use
Info: Startup phase 12 took 0.000301123 s, 256.105 MB of memory in use
Info: Finished startup at 0.249664 s, 256.105 MB of memory in use

TCL: Minimizing for 0 steps
Info: List of ranks running QM simulations: 0.
('orcaInFileName:', '/auto/tms6/amonari/NAMD_QMMM_EX/tmpqm1//0/qmmm_tc.in')
('pcFileName:', '/auto/tms6/amonari/NAMD_QMMM_EX/tmpqm1//0/point_charges')
('orcaOutFileName:', '/auto/tms6/amonari/NAMD_QMMM_EX/tmpqm1//0/qmmm_tc.in.out')
('finalResFileName:', '/auto/tms6/amonari/NAMD_QMMM_EX/tmpqm1//0/qmmm_0.input.result')
('Sum of the charges: ', -1.7289439999999978)
('self-energy: ', '-175.75046003837048', ' a.u.')
</pre>
<p><br />
</p>
<h1><span class="mw-headline" id="Cr.C3.A9er_un_environnement_pour_python_3.6">Créer un environnement pour python 3.6</span></h1>
<pre>
[tmssoft@visu10 ~]$ python3.6 -m venv  /auto/soft/python/3.6
[tmssoft@visu10 ~]$ source /auto/soft/python/3.6/bin/activate
(3.6) [tmssoft@visu10 ~]$ pip install --upgrade pip
(3.6) [tmssoft@visu10 ~]$ pip install numpy matplotlib openbabel
</pre>
<p>Erreur Python.h  =&gt; installation du paquet manquant
</p>
<pre>[root@visu10 ~]# yum install python36-devel
</pre>
<pre>
(3.6) [tmssoft@visu10 ~]$ pip install numpy matplotlib openbabel

(3.6) [tmssoft@bolo05 3.6]$ git clone https://github.com/openbabel/openbabel.git

 1010  git clone https://github.com/openbabel/openbabel.git
 1011  cd openbabel/
 1012  mkdir build
 1013  cd build/

 cmake .. -DPYTHON_EXECUTABLE=/auto/soft/python/3.6/bin/python -DPYTHON_BINDINGS=ON -DRUN_SWIG=ON

 grep '^PYTHON' CMakeCache.txt
</pre>
<h1><span class="mw-headline" id="Installer_une_bibiloth.C3.A8que_python_dans_son_HOME">Installer une bibilothèque python dans son HOME</span></h1>
<pre>
pip3 install --user biopython
</pre>




</body></html>