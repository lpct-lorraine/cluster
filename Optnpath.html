<html>
<head><title>Optnpath</title></head>
<body>
<h1>Optnpath</h1><p><br />
Opt'n Path is a program that can optimize a reaction path between two
structures. The algorithm to optimize the path is close to the string
method. The originality of this program lies in the coordinate set it
can use to generate and optimize the path.
</p><p>This program is an independant program that calls standard electronic
structure codes to get the energies and forces it needs to optimize
the reaction path. For now, it is coupled to Gaussian, MOPAC,
Vasp, Turbomole and Siesta.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Official_web_site"><span class="tocnumber">1</span> <span class="toctext">Official web site</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Citation"><span class="tocnumber">2</span> <span class="toctext">Citation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Module_environment"><span class="tocnumber">3</span> <span class="toctext">Module environment</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Contact"><span class="tocnumber">4</span> <span class="toctext">Contact</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Example"><span class="tocnumber">5</span> <span class="toctext">Example</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Official_web_site">Official web site</span></h1>
<p><a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://perso.ens-lyon.fr/paul.fleurat-lessard/ReactionPath.html">http://perso.ens-lyon.fr/paul.fleurat-lessard/ReactionPath.html</a>
</p>
<h1><span class="mw-headline" id="Citation">Citation</span></h1>
<p>This work is registered with the Agency for the Protection of Programs as IDDN.FR.001.100009.000.S.P.2014.000.30625.
</p><p>This software was developed by Prof. Paul Fleurat-Lessard and can be used for free. 
</p><p>To publish any result obtained with Opt'n Path, you just need to cite the authors as such&#160;: P. Fleurat- Lessard, P. Dayal, A Chemist View on Reaction Path Determination, to be published; freely available at: <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://perso.ens-lyon.fr/paul.fleurat-lessard/ReactionPath.html">http://perso.ens-lyon.fr/paul.fleurat-lessard/ReactionPath.html</a>.
</p>
<h1><span class="mw-headline" id="Module_environment">Module environment</span></h1>
<pre>module load optnpath/1.504-gnu-5.2.0/std
</pre>
<h1><span class="mw-headline" id="Contact">Contact</span></h1>
<p>For any question concerning the use of Opt'n Path, you can contact Romain Ramozzi or send an e-mail to optnpath@gmail.com
</p>
<h1><span class="mw-headline" id="Example">Example</span></h1>
<ul><li> OptnPath Input&#160;: "SN2_zmat.path" file</li></ul>
<pre>
 &amp;path
  nat=6,&#160;! Number of atoms
  ngeomi=2,&#160;! Number of initial geometries
  ngeomf=18, &#160;!Number of geometries along the path
  OptReac=.F.,&#160;! Do you want to optimize the reactants&#160;?
  OptProd=F, &#160;! Don't optimize the products
  Align=T,&#160;! Do not align the molecules when interpolating geometries
  EReac=-0.21076866,&#160;! Energy of the reactant, because it is not calculated
  EProd=-0.21076866, &#160;! As we don't optimize products, we can give their energy
  FFrozen=F, &#160;! Some atoms  are frozen. See FrozenList.
  PathOnly=.F., &#160;! do NOT stop after generating the first path
  AutoCart=T,&#160;! Determine automatically atom described in cartesian.
  Hupdate="MS",&#160;! Use Murtagh-Sargent update for the Hessian matrix
  PathName="Test_Gaussian", &#160;! Geometries along the path store in 'Test_Gaussian.XXX'
  prog="gaussian", &#160;! Use Gaussian to get E and forces.
  ProgExe="g09",&#160;! Use g09 for Gaussian executable
  coord='zmat', &#160;! we use mixed coordinates
  maxcyc=51,&#160;! Launch 50 iterations
  IReparam=5,&#160;! re-distribution of points along the path every 5 iterations
  ISpline=500,&#160;! Start using spline interpolation at iteration   500 (ie no spline&#160;!)
  SMax=0.02  &#160;! Max displacement will be 0.02 a.u.
/
  6
   Cl- + H3CCl
   C  0.0 0.0 0.0
   Cl  1.791689 0.0 0.0
   H  -0.358375 1.037571 0.0
   H  -0.356525 -0.518921 -0.898137
   H  -0.360734 -0.518109 0.897921
   Cl  -6.0         0.001             0.
    6 
     ClCH3 + Cl-
  C           0.0     0.0     0.0
  Cl          6.0         0.001             0.
  H           0.358375       1.037571        0.0
  H           0.356525       -0.518921       -0.898137
  H           0.360734       -0.518109       0.897921
  Cl          -1.791689        0.0     0.0
%chk=Test
#P  HF/3-21G FORCE

 SN2 Reaction

-1,1
  C  0.0 0.0 0.0
  Cl  1.791689 0.0 0.0
  H  -0.358375 1.037571 0.0
  H  -0.356525 -0.518921 -0.898137
  H  -0.360734 -0.518109 0.897921
  Cl  -6.0         0.                0.
</pre>
<ul><li> Script SGE&#160;: "sge_optnpath.sh" file</li></ul>
<pre style="white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;"> 
#!/bin/sh
#
#Resource selection
#
#$ -q lisboa
#$ -pe parallel 4             # nb virtual procs on parallel queue
#
#$ -cwd
#$ -S /bin/bash
#$ -N test_optnpath           # Name of Job ($SGE_JOB_NAME)
#$ -o sge.out
#$ -e sge.out
#$ -v MODULEPATH

set -x

# load the module
. /etc/profile.d/z00_lmod.sh
# ---------------------------
# set up the guassian version to use
# ---------------------------
module load gaussian/09.D01/pgi-10.3/std
module load optnpath/1.504-gnu-5.2.0/std

# Set the max number of threads to use for programs using OpenMP. Should be &lt;= ppn. Does nothing if the program doesn't use OpenMP.
export OMP_NUM_THREADS=1

if [[ "x$TEMPORARY_DIR" == "x" ]]; then
    export TEMPORARY_DIR="/home/${USER}/tmp/${JOB_ID}"
    echo "Setting TEMPORARY_DIR to $TEMPORARY_DIR because it was previously unspecified."
else
    echo "Using TEMPORARY_DIR: $TEMPORARY_DIR specified from the command line."
fi
export GAUSS_SCRDIR="$TEMPORARY_DIR/temporary_files"

export JOBNAME=SN2_zmat
export JOBSOURCE="$SGE_O_WORKDIR"

# set up function. this isn't called/run here. It's used if the job is canceled via a signal.
cleanup_scratch() {
    echo "Deleting inside signal handler, meaning I probably either hit the walltime, or deleted the job using qdel"

    ##NOTE: IF YOU WANT TO KEEP ANY OF THE FILES FROM $TEMPORARY_DIR WHEN THE JOB IS DELETED
    # BY SBATCH OR KILLED BECAUSE OF WALLTIME, USE A COMMAND LIKE THIS:
    # cp -v "$TEMPORARY_DIR/$JOBNAME"*.mo "$SGE_O_WORKDIR"

    cd "$SGE_O_WORKDIR"
    rm -rfv "$GAUSS_SCRDIR"
    rm -rfv "$TEMPORARY_DIR"
    echo "---"
    echo "Signal handler ending time:"
    date
    exit 0
}

# Associate the function "cleanup_scratch" with the TERM signal, which is usually how jobs get killed
trap 'cleanup_scratch' TERM

# basic diagnostic output
echo "---"
echo "Beginning-of-job Diagnostic information:"
echo "---"
echo "Sun GrigEngine Queue:"
echo $PE
echo "---"
echo "Nodes assigned:"
cat ${PE_HOSTFILE}
echo "---"
echo "Temporary Directory:"
echo "$TEMPORARY_DIR"
echo "---"
echo "Scratch Directory:"
echo "$GAUSS_SCRDIR"
echo "---"
echo "Job Source Directory:"
echo "$JOBSOURCE"
echo "---"
echo "Current Time:"
date
echo "---"

# create temporary directory
echo "Creating Temporary directory at $TEMPORARY_DIR"
mkdir -pv "$TEMPORARY_DIR" 2&gt;&amp;1
echo "---"

# create scratch directory
echo "Creating scratch directory at $GAUSS_SCRDIR"
mkdir -pv "$GAUSS_SCRDIR" 2&gt;&amp;1
echo "---"

# copy working data information from $JOBSOURCE/$JOBNAME* to $TEMPORARY_DIR
echo "Copying working data information from $JOBSOURCE/${JOBNAME}.path to $TEMPORARY_DIR"
cp -v "$JOBSOURCE/${JOBNAME}.path" "$TEMPORARY_DIR"
echo "---"

# changing directory to $TEMPORARY_DIR
echo "Changing directory to temporary dir at $TEMPORARY_DIR"
cd "$TEMPORARY_DIR"
echo "---"

echo "Starting Optnpath with Gaussian Run at:"
date

# the actual optnpath with gaussian run starts here
Path.exe ${JOBNAME}.path &gt; ${JOBNAME}.out 2&gt; ${JOBNAME}.err

echo "---"
echo "Optnpath with Gaussian Run ended at:"
date
echo "---"

echo "Copying resulting data (\$JOBNAME*.mo and \$JOBNAME.log) to $JOBSOURCE"
cp -v "$TEMPORARY_DIR/$JOBNAME"*.mo "$JOBSOURCE"
cp -v "$TEMPORARY_DIR/$JOBNAME.log" "$JOBSOURCE"
cp -v "$TEMPORARY_DIR/$JOBNAME.out" "$JOBSOURCE"
cp -v "$TEMPORARY_DIR/$JOBNAME.err" "$JOBSOURCE"
echo "---"

echo "Changing directory back to submission directory at $SGE_O_WORKDIR"
cd "$SGE_O_WORKDIR"

# delete directory
echo "Deleting directories at end of script"
#rm -rfv "$GAUSS_SCRDIR"
#rm -rfv "$TEMPORARY_DIR"

echo "---"
echo "Job ending time:"
date
echo "---"
</pre>
<ul><li> How to submit on tejo with SGE&#160;?</li></ul>
<pre>
qsub sge_optnpath.sh
</pre>




</body></html>