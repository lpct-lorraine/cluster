<html>
<head><title>Finite Element Simulations</title></head>
<body>
<h1>Finite Element Simulations</h1><p><br />
Finite Element Simulations
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Referent"><span class="tocnumber">1</span> <span class="toctext">Referent</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#versions_available"><span class="tocnumber">2</span> <span class="toctext">versions available</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#References"><span class="tocnumber">3</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Doc_technique"><span class="tocnumber">4</span> <span class="toctext">Doc technique</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Liste_des_logiciels"><span class="tocnumber">4.1</span> <span class="toctext">Liste des logiciels</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Config_qui_marche_sous_ubuntu12.2C_machine_virtuelle"><span class="tocnumber">4.2</span> <span class="toctext">Config qui marche sous ubuntu12, machine virtuelle</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Compilation_sous_centos_7"><span class="tocnumber">4.3</span> <span class="toctext">Compilation sous centos 7</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Execution_pas_.C3.A0_pas"><span class="tocnumber">4.4</span> <span class="toctext">Execution pas à pas</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#vtk"><span class="tocnumber">4.4.1</span> <span class="toctext">vtk</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#openmpi"><span class="tocnumber">4.4.2</span> <span class="toctext">openmpi</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#petsc"><span class="tocnumber">4.4.3</span> <span class="toctext">petsc</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#libmesh-third"><span class="tocnumber">4.4.4</span> <span class="toctext">libmesh-third</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#simulation"><span class="tocnumber">4.4.5</span> <span class="toctext">simulation</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Execution"><span class="tocnumber">4.4.6</span> <span class="toctext">Execution</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Cr.C3.A9ation_d.27un_module"><span class="tocnumber">5</span> <span class="toctext">Création d'un module</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Essai_d.27installation_avec_EasyBuild"><span class="tocnumber">6</span> <span class="toctext">Essai d'installation avec EasyBuild</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#gcc_4.6.3"><span class="tocnumber">6.1</span> <span class="toctext">gcc 4.6.3</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#openmpi_2"><span class="tocnumber">6.2</span> <span class="toctext">openmpi</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#vtk_2"><span class="tocnumber">6.3</span> <span class="toctext">vtk</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#openmpi_3"><span class="tocnumber">6.4</span> <span class="toctext">openmpi</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#petsc_2"><span class="tocnumber">6.5</span> <span class="toctext">petsc</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#libmesh-third_2"><span class="tocnumber">6.6</span> <span class="toctext">libmesh-third</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#simulation_2"><span class="tocnumber">6.7</span> <span class="toctext">simulation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Compilation_du_code"><span class="tocnumber">7</span> <span class="toctext">Compilation du code</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Referent">Referent</span></h1>
<p>Martin Müller
</p>
<h1><span class="mw-headline" id="versions_available">versions available</span></h1>
<h1><span class="mw-headline" id="References">References</span></h1>
<h1><span class="mw-headline" id="Doc_technique">Doc technique</span></h1>
<h2><span class="mw-headline" id="Liste_des_logiciels">Liste des logiciels</span></h2>
<pre>
 petsc-2.3.3.tar.gz

 openmpi-1.4.3.tar.bz2
 simulation.zip
 vtk-v5.8.0.tar.bz2

 libmesh v0.7.1.tar.gz
 libmesh-third.zip
</pre>
<h2><span class="mw-headline" id="Config_qui_marche_sous_ubuntu12.2C_machine_virtuelle">Config qui marche sous ubuntu12, machine virtuelle</span></h2>
<pre>

gcc 4.6.3

vtk 5.8.0-5  libvtk5-dev

openmpi 1.4.3-2.1

libmesh-dev 0.7.1.-2

libc6-dev  2.15
</pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Compilation_sous_centos_7">Compilation sous centos 7</span></h2>
<pre>
Pour installer il faut faire les choses suivantes dans l'ordre&#160;:

1. Installer openmpi 
&gt;sudo apt-get install libopenmpi-dev

2. Installer vtk:
&gt;sudo apt-get install libvtk-dev libvtk 5.x
x va etre la version comme 5.6 ou 5.8

3. telecharger petsc.2.3.3 (http://ftp.mcs.anl.gov/pub/petsc/software_old/petsc-2.3.3.tar.gz)
4. installer avec:
&gt;export PETSC_DIR=/home/[dossier ou se trouve petsc]
&gt;export PETSC_ARCH=linux-gnu-c-debug  
&gt;./config/configure.py --download-f-blas-lapack=1 --with-mpi-dir=/usr/lib/openmpi --with-shared=1
(la partie openmpi peut etre different dans differents ordinateurs)
&gt;make all

5. compiler libmesh.
dans le dossier ou se trouve libmesh, il faut faire:
&gt;./configure --enable-vtk --enable-amr --enable-second --enable-exodus --with-vtk-include=/usr/include/vtk-5.x --with-vtk-lib=/usr/lib
(la partie vtk peut etre different ici. ce qui est important, dans include il faut specifier le dossier
ou on trouve les fichier "header" de vtk qui ont l'extension .h 
Dans la partie --with-vtk-lib  il faut dire ou se trouve les librairies de vtk qui ont l'extension .so )
&gt;make all

Pour les simulations il faut changer une ligne dans le fichier Makefile, pour dire où se trouve libmesh,
apres il faut faire &gt;make
</pre>
<h2><span class="mw-headline" id="Execution_pas_.C3.A0_pas">Execution pas à pas</span></h2>
<pre>
module load EasyBuild
module load GCC/4.6.3

eb OpenMPI-1.4.5-GCC-4.6.3.eb
eb -S libibverbs-devel
wget https://download.open-mpi.org/release/open-mpi/v1.4/openmpi-1.4.3.tar.bz2
tar -jxf openmpi-1.4.3.tar.bz2

</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="vtk">vtk</span></h3>
<pre>
cd vtk-v5.8.0
ccmake .      =&gt; INteractive session&#160;: Write "c" to configure
make -j 10
cmake .

mkdir vtk-v5.8.0/install

module load GCC/4.6.3
export LIBRARY_PATH=/auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/:/auto/store/fpascale/Martin/libmesh-third/../openmpi-1.4.3-gcc4.6.3/lib:$LIBRARY_PATH


env C=gcc CXX=g++ ccmake ../
ccmake .
make
make install
</pre>
<h3><span class="mw-headline" id="openmpi">openmpi</span></h3>
<pre>
wget https://download.open-mpi.org/release/open-mpi/v1.4/openmpi-1.4.3.tar.bz2
tar -jxf openmpi-1.4.3.tar.bz2
cd openmpi-1.4.3
export LIBS=""
CC=gcc CXX=g++ FC=gfortran F90=gfortran ./configure --prefix=/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3
make -j 10
make install
export PATH=/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/bin:$PATH
export LD_LIBRARY_PATH=/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib:$LD_LIBRARY_PATH
</pre>
<h3><span class="mw-headline" id="petsc">petsc</span></h3>
<pre>

export PETSC_DIR=/auto/store/fpascale/Martin/petsc-2.3.3-p16
export PETSC_ARCH=linux-gnu-c-debug
./config/configure.py --download-f-blas-lapack=1 --with-mpi-dir=/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/ --with-shared=1
make all
</pre>
<h3><span class="mw-headline" id="libmesh-third">libmesh-third</span></h3>
<pre>

export PATH=/auto/store/fpascale/Martin/libmesh-third/../openmpi-1.4.3-gcc4.6.3/bin/
export LD_LIBRARY_PATH=//auto/store/fpascale/Martin/libmesh-third/../openmpi-1.4.3-gcc4.6.3/lib:$LD_LIBRARY_PATH
export PATH=/auto/store/fpascale/Martin/libmesh-third/../openmpi-1.4.3-gcc4.6.3/bin/:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/auto/store/fpascale/bin
export PETSC_DIR=/auto/store/fpascale/Martin/petsc-2.3.3-p16
export PETSC_ARCH=linux-gnu-c-debug


./configure --enable-vtk --enable-amr --enable-second --enable-exodus --with-vtk-include=/auto/soft/EasyBuild/software/vtk/include/vtk-5.8/ --with-vtk-lib=/auto/soft/EasyBuild/software/vtk/lib/vtk-5.8/
</pre>
<p>IMPORTANT&#160;: utiliser mpic++ pour la dernière étape sinon on rencontre des problèmes dans l'édition de liens
</p>
<pre>
mpic++ -DNDEBUG -O2 -felide-constructors -fPIC -funroll-loops -fstrict-aliasing -DPETSC_USE_DYNAMIC_LIBRARIES src/apps/compare.o -o bin/compare /auto/store/fpascale/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt/libmesh.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/liblaspack.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libparmetis.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libmetis.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libsfcurves.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libgmv.so -Wl,-rpath,//auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/ -L//auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/ -lvtkIO -lvtkCommon -lvtkFiltering /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libtetgen.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libtriangle.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libexodusii.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libnetcdf.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libnemesis.so /auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libHilbert.so -L/auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug -lpetscsnes -lpetscksp -lpetscdm -lpetscmat -lpetscvec -lpetscsnes -lpetsc -lX11 -Wl,-rpath,/auto/store/fpascale/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -L/auto/store/fpascale/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -lflapack -Wl,-rpath,/auto/store/fpascale/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -L/auto/store/fpascale/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -lfblas -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib/../lib64 -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib64/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib64 -L/auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8 -L/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib -L. -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../.. -lgfortran -lm -lquadmath -Wl,-rpath,/auto/store/fpascale/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug -Wl,-rpath,/auto/store/fpascale/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug -lstdc++

</pre>
<h3><span class="mw-headline" id="simulation">simulation</span></h3>
<pre>
cat /auto/store/fpascale/Martin/libmesh-third/Make.common
# $Id: Make.common.in 3538 2009-11-04 00:15:11Z roystgnr $


###############################################################################
## Please note:
##   The ./configure script generates Make.common from 
##   Make.common.in, so if you want to change something,
##   then do it in the latter file (here!) and re-run
##   ./configure in the top level directory
###############################################################################

###############################################################################
#
# The Make.common file defines the build environment for libMesh
# and all its helper applications.  If you want to build an application
# that makes use of libMesh it is highly recommended that you include
# this file in your project's Makefile.
#
###############################################################################


###############################################################################
# the following lines will be replaced by the output 
# of ./configure
hosttype              = x86_64-unknown-linux-gnu
hostos                = linux-gnu

libmesh_CXX           = /auto/store/fpascale//Martin/openmpi-1.4.3-gcc4.6.3/bin/mpic++
libmesh_CC            = /auto/store/fpascale//Martin/openmpi-1.4.3-gcc4.6.3/bin/mpiCC
libmesh_F77           = /auto/store/fpascale//Martin/openmpi-1.4.3-gcc4.6.3/bin/mpif90
libmesh_F90           = /auto/store/fpascale//Martin/openmpi-1.4.3-gcc4.6.3/bin/mpif90
libmesh_LDFLAGS       = 
libmesh_DLFLAGS       =
libmesh_LIBS          = 
libmesh_FLIBS         =  -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib/../lib64 -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib64/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5 -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib -L/auto/store/fpascale/.local/easybuild/software/GCC/4.6.3/lib64 -L/auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8 -L/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib -L. -L/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../.. -lgfortran -lm -lquadmath
libmesh_FFLAGS        = -g -O2
GXX-VERSION           = gcc-other
libmesh_CXXSHAREDFLAG = -shared
libmesh_CSHAREDFLAG   = -shared
libmesh_RPATHFLAG     = -Wl,-rpath,

# Complex variable support
enable-complex       = no
ifeq ($(enable-complex),yes)
  libmesh_CXXFLAGS     += -DUSE_COMPLEX_NUMBERS
  libmesh_CFLAGS       += -DUSE_REAL_NUMBERS
endif

# Petsc iterative solvers for parallel and uniprocessor
# applications
enable-petsc         = yes
petsc-version        = 2.3.3
petsc-major-minor    = 2.3.x
PETSC_ARCH           = linux-gnu-c-debug
PETSC_DIR            = /auto/store/fpascale/Martin/petsc-2.3.3-p16

# Slepc for eigen value analysis
enable-slepc         = no
SLEPC_DIR            = 

# MPI configuration
# (only explicitly defined when PETSc is absent, otherwise snooped from PETSc)
MPI_IMPL             = petsc_snooped
MPI_INCLUDE          = 
MPI_LIB              =  

# Trilinos configuration
enable-trilinos         = no
AZTECOO_MAKEFILE_EXPORT = 

# Nox configuration
enable-nox         = no
NOX_MAKEFILE_EXPORT = 

# Doxygen for generating documentation
doxygen		     = 

# Perl for making .depend
perl                 = /usr/bin/perl

# Flag for optional packages
enable-optional      = yes
enable-laspack	     = yes
enable-metis	     = yes
enable-parmetis	     = yes
enable-sfcurves	     = yes
enable-gzstream      = no
enable-tetgen        = yes
enable-triangle      = yes
enable-gmv           = yes
enable-vtk           = yes
enable-exodus	     = yes
enable-netcdf	     = yes
enable-nemesis	     = yes
enable-libhilbert    = yes

#
# Set the current directory.
libmesh_dir&#160;:= /auto/store/fpascale/Martin/libmesh-third
export libmesh_dir
###############################################################################




###############################################################################
# Set the option to determine if shared libraries will be built
enable-shared&#160;:= yes
#
# Figure out the compilation mode based on the
# environment variable METHOD.
opt-mode  &#160;:= off
debug-mode&#160;:= off
prof-mode &#160;:= off
oprof-mode&#160;:= off
syn-mode  &#160;:= off
devel-mode&#160;:= off

# Unless we find a valid or an unset METHOD 
# variable, there's something wrong.
mode&#160;:= "INVALID"

# If the user has no environment variable
# called METHOD, he gets optimized mode.
ifeq (x$(METHOD),x)
  METHOD&#160;:= opt
endif

# If METHOD=opt, compile in optimized mode.
ifeq ($(METHOD),optimized)
  METHOD&#160;:= opt
endif

ifeq ($(METHOD),opt)
  opt-mode&#160;:= on
  mode    &#160;:= "optimized"
endif

#
# If METHOD=devel, compile in development mode.
ifeq ($(METHOD),development)
  METHOD&#160;:= devel
endif

ifeq ($(METHOD),devel)
  devel-mode&#160;:= on
  mode      &#160;:= "development"
endif

#
# If METHOD=dbg, compile in debug mode.
ifeq ($(METHOD),debug)
  METHOD&#160;:= dbg
endif
ifeq ($(METHOD),dbg)
  debug-mode&#160;:= on
  mode      &#160;:= "debug"
endif

#
# If METHOD=prof, compile in profiling mode
ifeq ($(METHOD),profiling)
  METHOD&#160;:= pro
endif
ifeq ($(METHOD),prof)
  METHOD&#160;:= pro
endif
ifeq ($(METHOD),pro)
  prof-mode    &#160;:= on
  mode         &#160;:= "profiling"
  enable-shared&#160;:= no
endif

#
# If METHOD=oprof, compile in OProfile mode
ifeq ($(METHOD),oprofile)
  METHOD&#160;:= oprof
endif
ifeq ($(METHOD),oprof)
  oprof-mode   &#160;:= on
  mode         &#160;:= "oprofile"
endif

# If the user had a METHOD variable we didn't
# recognize, there's been some mistake.  Let's
# yell at them.
ifeq ($(mode),"INVALID")
  $(error Invalid environment variable METHOD=$(METHOD) specified)
endif

# The file extension for object files.
# foo.C is compiled to foo.$(obj-suffix)
obj-suffix&#160;:= x86_64-unknown-linux-gnu.$(METHOD).o

#
# Define the right lib-extension for shared libraries
static_libext&#160;:= .a
shared_libext&#160;:= .so
ifeq ($(findstring darwin,$(hostos)),darwin)
  shared_libext&#160;:= .dylib
endif

libext&#160;:= $(static_libext)
ifeq ($(enable-shared),yes) 
  libext&#160;:= $(shared_libext)
endif
###############################################################################



###############################################################################
# Compiler flags, different for optimized, debug, and profiler modes.
ifeq ($(opt-mode),on)
  libmesh_CXXFLAGS += -DNDEBUG  -O2 -felide-constructors -fPIC -funroll-loops -fstrict-aliasing
  libmesh_CFLAGS   += -DNDEBUG -O2 -fPIC -funroll-loops -fstrict-aliasing
endif


ifeq ($(devel-mode),on)
  libmesh_CXXFLAGS +=  -O2 -felide-constructors -g -ansi -pedantic -W -Wall -Wno-long-long -Wunused -Wpointer-arith -Wimplicit -Wformat -Wparentheses -Wuninitialized -fPIC -funroll-loops -fstrict-aliasing
  libmesh_CFLAGS   += -O2 -g -fPIC -funroll-loops -fstrict-aliasing
endif


ifeq ($(debug-mode),on)
  libmesh_CXXFLAGS += -DDEBUG  -O0 -felide-constructors -g -ansi -pedantic -W -Wall -Wno-long-long -Wunused -Wpointer-arith -Wimplicit -Wformat -Wparentheses -fPIC
  libmesh_CFLAGS   += -DDEBUG -g -fPIC
endif


ifeq ($(prof-mode),on)
  libmesh_CXXFLAGS += -DNDEBUG  -O2 -felide-constructors -fPIC -funroll-loops -fstrict-aliasing -pg
  libmesh_CFLAGS   += -DNDEBUG -O2 -fPIC -funroll-loops -fstrict-aliasing -pg 
endif

ifeq ($(prof-mode),on)
  libmesh_LIBS += -pg
endif


ifeq ($(oprof-mode),on)
  libmesh_CXXFLAGS += -DNDEBUG  -O2 -felide-constructors -fPIC -funroll-loops -fstrict-aliasing -g
  libmesh_CFLAGS   += -DNDEBUG -O2 -fPIC -funroll-loops -fstrict-aliasing -g 
endif
###############################################################################



###############################################################################
# The mesh library
#
mesh_library_dir&#160;:= $(libmesh_dir)/lib/$(hosttype)_$(METHOD)

mesh_library    &#160;:= $(mesh_library_dir)/libmesh$(static_libext)
ifeq ($(enable-shared),yes) 
  mesh_library  &#160;:= $(mesh_library_dir)/libmesh$(shared_libext)
  libmesh_DLFLAGS += $(libmesh_RPATHFLAG)$(mesh_library_dir)
endif

libmesh_LIBS += $(mesh_library)
###############################################################################



###############################################################################
# now configuration for package includes, libraries, etc...

#
# The include directories for libMesh
libmesh_INCLUDE += -I$(libmesh_dir)/include/base \
                   -I$(libmesh_dir)/include/enums \
                   -I$(libmesh_dir)/include/error_estimation \
                   -I$(libmesh_dir)/include/fe \
                   -I$(libmesh_dir)/include/geom \
                   -I$(libmesh_dir)/include/mesh \
                   -I$(libmesh_dir)/include/numerics \
                   -I$(libmesh_dir)/include/parallel \
                   -I$(libmesh_dir)/include/partitioning \
                   -I$(libmesh_dir)/include/quadrature \
                   -I$(libmesh_dir)/include/solvers \
                   -I$(libmesh_dir)/include/systems \
                   -I$(libmesh_dir)/include/utils



#
# Package-specific stuff

#
# Contributed source &amp; libraries
EXTERNAL_LIBDIR&#160;:= $(libmesh_dir)/contrib/lib/$(hosttype)_$(METHOD)
ifeq ($(enable-shared),yes) 
  libmesh_DLFLAGS += $(libmesh_RPATHFLAG)$(EXTERNAL_LIBDIR)
endif


# Include path for local boost header files.  Note, this
# will probably not be an "optional" package if we really
# do end up using it.
libmesh_INCLUDE += -I$(libmesh_dir)/contrib/boost

#
# Optional packages
ifeq ($(enable-optional),yes)

  # if Laspack is used we need the header path
  # and the lib
  libmesh_LIBS    += $(EXTERNAL_LIBDIR)/liblaspack$(libext)
  libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/laspack

  # if Paretis is used we need the header path
  # and the lib
  # (Parmetis must precede Metis for static linking)
  libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libparmetis$(libext)
  libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/parmetis/Lib

  # if Metis is used we need the header path
  # and the lib
  libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libmetis$(libext)
  libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/metis/Lib

  # if Space filling curves are used we need the
  # header path and the lib
  libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libsfcurves$(libext)
  libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/sfcurves

  # if TBB is used, we need the 
  # header path and the lib
  libmesh_LIBS    += 
  libmesh_INCLUDE += 

  # if gzstreams are used, we need the 
  # header path and the lib
  libmesh_LIBS    += 
  libmesh_INCLUDE += 

  # if Tecplot is used, link against tecio.a
  libmesh_LIBS    += 
  libmesh_INCLUDE += 

  # Link against the GMV APIs to read/write GMV files
  libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libgmv$(libext)
  libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/gmv

  # Link against the VTK APIs to read/write VTK files
  ifeq ($(enable-vtk),yes)
    libmesh_LIBS    += $(libmesh_RPATHFLAG)//auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/ -L//auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/ -lvtkIO -lvtkCommon -lvtkFiltering
    libmesh_INCLUDE += -I/auto/store/fpascale/Martin/vtk-v5.8.0/./local/include/vtk-5.8/
  endif

  # if TetGen is used:
  ifeq ($(enable-tetgen),yes)
    libmesh_LIBS     += $(EXTERNAL_LIBDIR)/libtetgen$(libext)
    libmesh_INCLUDE  += -I/auto/store/fpascale/Martin/libmesh-third/contrib/tetgen
  endif

  # if Triangle is used:
  ifeq ($(enable-triangle),yes)
    libmesh_LIBS     += $(EXTERNAL_LIBDIR)/libtriangle$(libext)
    libmesh_INCLUDE  += -I/auto/store/fpascale/Martin/libmesh-third/contrib/triangle
  endif

  # if Exodus is used we need the header path
  # and the lib
  ifeq ($(enable-exodus),yes)
    libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libexodusii$(libext)
    libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/exodusii/Lib/include
  endif

  # if netCDF is used, link against libnetcdf.a
  # (note that netCDF is required by exodus if available,
  # so we need to link to this _after_ exodus.
  ifeq ($(enable-netcdf),yes)
    libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libnetcdf$(libext)
    libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/netcdf/Lib
  endif

  # if Nemesis is used we need the header path
  # and the lib
  ifeq ($(enable-nemesis),yes)
    libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libnemesis$(libext)
    libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/nemesis/Lib
  endif

  # if libHilbert is used we need the header path
  # and the lib
  ifeq ($(enable-libhilbert),yes)
    libmesh_LIBS    += $(EXTERNAL_LIBDIR)/libHilbert$(libext)
    libmesh_INCLUDE += -I/auto/store/fpascale/Martin/libmesh-third/contrib/libHilbert/include
  endif

  # Trilinos - at a minimum, we support the 
  # AztecOO linear solvers and requisite Epetra
  # data structures
  ifeq ($(enable-trilinos),yes)
      include 
      libmesh_LIBS    += $(AZTECOO_LIBS)
      libmesh_INCLUDE += $(AZTECOO_INCLUDES)

      # Nox, an additional option if AztecOO is present
      ifeq ($(enable-nox),yes)
          include 
          libmesh_LIBS    += $(NOX_LIBS)
          libmesh_INCLUDE += $(NOX_INCLUDES)
          libmesh_CXXFLAGS     += -DHAVE_CONFIG_H
      endif	
  endif	



  #############################################################################
  # SLEPc
  ifeq ($(enable-slepc),yes)
    # The configure script checks that only corresponding
    # versions of PETSc and SLEPc can be used. Hence,
    # petsc-major-minor is also used to identify the SLEPc version 
    ifeq ($(petsc-major-minor),2.3.x)  # 2.3.x &amp; newer style
      include $(SLEPC_DIR)/bmake/$(PETSC_ARCH)/slepcconf
    else
        ifeq ($(petsc-major-minor),3.0.x)  # 3.0.x
	    include ${SLEPC_DIR}/conf/slepc_common_variables
        else
            include $(SLEPC_DIR)/bmake/$(PETSC_ARCH)/packages	
        endif
    endif	

    libmesh_INCLUDE += -I$(SLEPC_DIR)/include

    # Depending on petsc version, libs live in different locations
    ifeq ($(petsc-major-minor),2.3.x) # 2.3.x &amp; newer does not use BOPT, has lib/ARCH/...
      PETSC_LIB = $(PETSC_DIR)/lib/$(PETSC_ARCH)
    else
      ifeq ($(petsc-major-minor),3.0.x) # 3.0.x &amp; newer does not use BOPT, has ARCH/lib/...
        PETSC_LIB = $(PETSC_DIR)/$(PETSC_ARCH)/lib
      else
        PETSC_LIB = $(PETSC_DIR)/lib/lib$(BOPT)/$(PETSC_ARCH)
      endif
    endif

    libs-SLEPC = -L$(SLEPC_LIB) \
                 -lslepc

    libmesh_LIBS += $(libs-SLEPC) $(ARPACK_LIB)

    libmesh_DLFLAGS += $(libmesh_RPATHFLAG)$(SLEPC_LIB)

  endif #end ifeq ($(enable-slepc),yes)


  #############################################################################
  # Petsc
  ifeq ($(enable-petsc),yes)

    # define BOPT first since it may be used in the packages file
    ifeq ($(enable-complex),yes)
      libmesh_CXXFLAGS     += -DPETSC_USE_COMPLEX
      libmesh_CFLAGS       += -DPETSC_USE_COMPLEX
      PETSC_BOPT.g = g_complex
      PETSC_BOPT.o = O_complex
    else
      PETSC_BOPT.g = g
      PETSC_BOPT.o = O
    endif

    ifeq ($(debug-mode),on)
      BOPT = $(PETSC_BOPT.g)
    else
      BOPT = $(PETSC_BOPT.o)
    endif
    # Depending on petsc version, we include different files
    ifeq ($(petsc-version),2.1.0)
      include $(PETSC_DIR)/bmake/$(PETSC_ARCH)/base.site # 2.1.0 style
    else
      C_CLINKER_SLFLAG = $(libmesh_RPATHFLAG)# necessary for PETSc &gt;= 2.1.6
      ifeq ($(petsc-major-minor),2.3.x)  # 2.3.x &amp; newer style
        include $(PETSC_DIR)/bmake/$(PETSC_ARCH)/petscconf # 2.3.0 or later style
      else
        ifeq ($(petsc-major-minor),3.0.x)  # 3.0.x &amp; newer style
          include $(PETSC_DIR)/$(PETSC_ARCH)/conf/petscvariables # 3.0.0 or later style
	else
          include $(PETSC_DIR)/bmake/$(PETSC_ARCH)/packages  # 2.1.1 or later style
        endif      
      endif      
    endif

#     # As of PETSc 2.1.x we can extract the libraries and include paths
#     # from the PETSc make file
#     LIBS    += `$(MAKE) -C $(PETSC_DIR) BOPT=$(BOPT) getlinklibs`
#     INCLUDE += `$(MAKE) -C $(PETSC_DIR) BOPT=$(BOPT) getincludedirs`

    #                    (needed by all petsc)  (needed by versions &lt;= 2.3.3)      (needed by versions &gt;= 3.0.0)
    libmesh_INCLUDE += -I$(PETSC_DIR)/include -I$(PETSC_DIR)/bmake/$(PETSC_ARCH) -I$(PETSC_DIR)/$(PETSC_ARCH)/include \
                         $(BLOCKSOLVE_INCLUDE) $(HYPRE_INCLUDE)

    # Depending on petsc version, libs live in different locations
    ifeq ($(petsc-major-minor),2.3.x) # 2.3.x &amp; newer does not use BOPT, has lib/ARCH/...
      PETSC_LIB = $(PETSC_DIR)/lib/$(PETSC_ARCH)
    else
      ifeq ($(petsc-major-minor),3.0.x) # 3.0.x &amp; newer does not use BOPT, has ARCH/lib/...
        PETSC_LIB = $(PETSC_DIR)/$(PETSC_ARCH)/lib
      else # old-schol lib/lib$BOPT/ARCH format
        PETSC_LIB = $(PETSC_DIR)/lib/lib$(BOPT)/$(PETSC_ARCH)
      endif
    endif

    ifeq ($(enable-shared),yes)
      libmesh_CXXFLAGS     += -DPETSC_USE_DYNAMIC_LIBRARIES
      libmesh_CFLAGS       += -DPETSC_USE_DYNAMIC_LIBRARIES 
      libmesh_DLFLAGS      += $(libmesh_RPATHFLAG)$(PETSC_LIB)
    endif

    # Depending on petsc version, we link with different libs&#160;:-(
    ifeq ($(petsc-major-minor),2.1.x)  # 2.1.x &amp; older style
      libs-PETSC = -L$(PETSC_LIB) \
                   -lpetscsnes \
                   -lpetscsles \
                   -lpetscdm \
                   -lpetscmat \
                   -lpetscvec \
                   -lpetscsnes \
                   -lpetsc
    else                               # 2.2.x &amp; newer style
      libs-PETSC = -L$(PETSC_LIB) \
                   -lpetscsnes \
                   -lpetscksp \
                   -lpetscdm \
                   -lpetscmat \
                   -lpetscvec \
                   -lpetscsnes \
                   -lpetsc
    endif

    ifdef PACKAGES_LIBS  # Variable available in 2.3.x petscconf
      libmesh_LIBS += $(libs-PETSC) \
                      $(PACKAGES_LIBS) \
                      $(libmesh_FLIBS)
    else                 # try to guess package dependencies
      libmesh_LIBS += $(libs-PETSC) \
                      $(BLOCKSOLVE_LIB) $(SPOOLES_LIB) $(HYPRE_LIB) \
                      $(SUPERLU_DIST_LIB) $(UMFPACK_LIB) $(SUPERLU_LIB) \
                      $(BLOPEX_LIB)  $(SPAI_LIB) \
                      $(BLASLAPACK_LIB) $(X11_LIB) $(MATLAB_LIB) \
                      $(libmesh_FLIBS)
    endif #end ifdef PACKAGES_LIBS

  endif #end ifeq ($(enable-petsc),yes)

  #############################################################################
  # SLEPc again. When linking slepc-2.3.x to external libraries
  # e.g. ARPACK this needs to be included after PETSc.
  ifeq ($(enable-slepc),yes)
    ifeq ($(petsc-major-minor),2.3.x)  # 2.3.x &amp; newer style
      include $(SLEPC_DIR)/bmake/slepc_common_variables
    endif
  endif

  # MPI configuration when Petsc is absent
  libmesh_LIBS    += $(MPI_LIB)
  libmesh_INCLUDE += $(MPI_INCLUDE)

endif # End of disable-optional test


# Finally, Append the linker flags to the libraries
libmesh_LIBS += $(libmesh_DLFLAGS) $(libmesh_LDFLAGS)


###############################################################################



###############################################################################
# Build rules

##################################
# C++ rules                      #
##################################

#
# How to compile C++
#
%.$(obj-suffix)&#160;:&#160;%.C
	@echo "Compiling C++ (in "$(mode)" mode) "$&lt;"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c $&lt; -o $@

##################################
# C rules                        #
##################################

# do not show this to the LASPACK Makefile
ifeq (x$(included-from-laspack),x)
  #
  # How to compile C
  #
%.$(obj-suffix)&#160;:&#160;%.c
	@echo "Compiling C (in "$(mode)" mode) "$&lt;"..."
	@$(libmesh_CC) $(libmesh_CFLAGS) $(libmesh_INCLUDE) -c $&lt; -o $@

else

  # only visible for LASPACK Makefile
  ifeq ($(enable-complex),yes)

    # complex: C++ rules for .c Laspack code
%.$(obj-suffix)&#160;:&#160;%.c
	@echo "Compiling C++ (in "$(mode)" mode) "$&lt;"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c $&lt; -o $@

  else

    # real: C rules for .c Laspack code
%.$(obj-suffix)&#160;:&#160;%.c
	@echo "Compiling C (in "$(mode)" mode) "$&lt;"..."
	@$(libmesh_CC) $(libmesh_CFLAGS) $(libmesh_INCLUDE) -c $&lt; -o $@

  endif
endif

##################################
# Fortran rules                  #
##################################

%.$(obj-suffix)&#160;:&#160;%.f
	@echo "Compiling Fortan (in "$(mode)" mode) "$&lt;"..."
	@$(libmesh_F77) $(libmesh_FFLAGS) $(libmesh_INCLUDE) -c $&lt; -o $@

%.$(obj-suffix)&#160;:&#160;%.f90
	@echo "Compiling Fortan90 (in "$(mode)" mode) "$&lt;"..."
	@$(libmesh_F90) $(libmesh_FFLAGS) $(libmesh_INCLUDE) -c $&lt; -o $@

###############################################################################



# Local Variables:
# mode: makefile
# End:

</pre>
<p><br />
</p>
<pre>
simulation]$ cat Makefile 
# $Id: Makefile 2501 2007-11-20 02:33:29Z benkirk $


# The location of the mesh library
meshdir&#160;:= . 

# include the library options determined by configure.  This will
# set the variables INCLUDE and LIBS that we will need to build and
# link with the library.
include /auto/store/fpascale/Martin/libmesh-third/Make.common
 
#
###############################################################################
# File management.  This is where the source, header, and object files are
# defined

#
# source files
#srcfiles 	:= $(wildcard *.C)
#srcfiles 	:= steady_shellsystem.C petsc_shell_solver.C shellelement.C shellsystem.C ExplicitShellsystem.C Tri_Tri_Intersection.C VoxelList.C shellmeasurementsystem.C Sequencer.C
srcfiles      &#160;:= petsc_shell_solver.C shellelement.C shellsystem.C ExplicitShellsystem.C Tri_Tri_Intersection.C VoxelList.C SDGeometry.C shellmeasurementsystem.C sequencer.C

#
# object files
objects		:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), $(srcfiles))
sh_obj		:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), shrinking_sphere.C)
ecoa_obj	:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), econe_angles.C)
eco_obj		:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), econe_shell.C)
expl_obj	:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), explicit_shell.C)
# stdy_obj   &#160;:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), steady_shell.C)
gs_obj        &#160;:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), growing_disc.C)
testexpl_obj       &#160;:= $(patsubst&#160;%.C,&#160;%.$(obj-suffix), test_explicit_shell.C)

###############################################################################



.PHONY: clean clobber distclean

###############################################################################
# Target:
#
econe_angles	  &#160;:= ./econe_angles-$(METHOD)
econe		  &#160;:= ./econe-$(METHOD)
explicit 	  &#160;:= ./explicitshell-$(METHOD)
# steady		  &#160;:= ./steadyshell-$(METHOD)
testexplicit          &#160;:= ./testexplicitshell-$(METHOD)
growing           &#160;:= ./growing_sphere-$(METHOD)
shrinking           &#160;:= ./shrinking_sphere-$(METHOD)

shr:: $(shrinking)
gs:: $(growing)
ecoa:: $(econe_angles)
eco:: $(econe)
expl:: $(explicit)
# stdy:: $(steady)

testexpl:: $(testexplicit)

$(sh_obj): shrinking_sphere.C
	@echo "Compiling shrinking_sphere.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c shrinking_sphere.C  -o $(sh_obj)

$(gs_obj): growing_sphere.C
	@echo "Compiling growing_sphere.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c growing_sphere.C  -o $(gs_obj)


$(ecoa_obj): econe_angles.C
	@echo "Compiling econe_angles.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c econe_angles.C  -o $(ecoa_obj)

$(eco_obj): econe_shell.C
	@echo "Compiling econe_shell.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c econe_shell.C  -o $(eco_obj) 

$(testexpl_obj): test_explicit_shell.C
	@echo "Compiling test_explicit_shell.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c test_explicit_shell.C  -o $(testexpl_obj) -g -pg


$(expl_obj): explicit_shell.C
	@echo "Compiling explicit_shell.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c explicit_shell.C  -o $(expl_obj) 


$(stdy_obj): steady_shell.C
	@echo "Compiling steady_shell.C..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(libmesh_INCLUDE) -c steady_shell.C  -o $(stdy_obj)

# Production rules:  how to make the target - depends on library configuration
$(shrinking): $(objects) $(sh_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(sh_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering -lstdc++

$(growing): $(objects) $(gs_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(gs_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering

$(econe_angles): $(objects) $(ecoa_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(ecoa_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering

$(econe): $(objects) $(eco_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(eco_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering  

$(explicit): $(objects) $(expl_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(expl_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering  

$(testexplicit): $(objects) $(testexpl_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(testexpl_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering -g -pg 


$(steady): $(objects) $(stdy_obj)
	@echo "Linking "$@"..."
	@$(libmesh_CXX) $(libmesh_CXXFLAGS) $(objects) $(stdy_obj) -o $@ $(libmesh_LIBS) $(libmesh_LDFLAGS) -lvtkFiltering


# Useful rules.
clean:
	@rm -f $(objects) *~

clobber:
	@$(MAKE) clean
	@rm -f $(target) out.gmv

distclean:
	@$(MAKE) clobber
	@rm -f *.o *.g.o *.pg.o

# Warning, the 3D problem may be extremely slow if you are running in debug mode.
run: $(target)
	@echo "***************************************************************"
	@echo "* Running Example " $(LIBMESHRUN) $(target) $(LIBMESHOPTIONS)
	@echo "***************************************************************"
	@echo " "
	@$(LIBMESHRUN) $(target) -d 1 -n 20 $(LIBMESHOPTIONS)
	@$(LIBMESHRUN) $(target) -d 2 -n 15 $(LIBMESHOPTIONS)
	@$(LIBMESHRUN) $(target) -d 3 -n 6 $(LIBMESHOPTIONS)
	@echo " "
	@echo "***************************************************************"
	@echo "* Done Running Example " $(LIBMESHRUN) $(target) $(LIBMESHOPTIONS)
	@echo "***************************************************************"


# include the dependency list
include .depend


#
# Dependencies
#
.depend:
	@$(perl) /auto/store/fpascale/Martin/libmesh-third/Make.common/contrib/bin/make_dependencies.pl -I. $(foreach i, $(wildcard $(meshdir)/*), -I$(i)) "-S\$$(obj-suffix)" $(srcfiles) &gt; .depend
	@echo "Updated .depend"

###############################################################################

</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="Execution">Execution</span></h3>
<pre>
cd /auto/store/fpascale/Martin/simulation
[fpascale@bolo10 simulation]$ module purge
[fpascale@bolo10 simulation]$ export LD_LIBRARY_PATH=/auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib:$LD_LIBRARY_PATH
[fpascale@bolo10 simulation]$ ./shrinking_sphere-opt
 Mesh Information:
  mesh_dimension()=2
  spatial_dimension()=3
  n_nodes()=2562
    n_local_nodes()=2562
  n_elem()=5120
    n_local_elem()=5120
    n_active_elem()=5120
  n_subdomains()=1
  n_processors()=1
  processor_id()=0

Replacing ShellSystem DOF map with Subdiv DOF map
DOF_MAP updated
Replacing ShellMeasurementSystem DOF map with Subdiv DOF map
DOF_MAP updated
Initializing equation system
Number of ghosts: 5120
obj_voxel_map.resize
...
</pre>
<p><br />
</p>
<h1><span class="mw-headline" id="Cr.C3.A9ation_d.27un_module">Création d'un module</span></h1>
<ul><li> Recopie des sources de Martin sous le compte générique tmssoft&#160;: ok</li></ul>
<ul><li> Tentative de compilation avec le compilateur gnu local. L'idée est d'éviter d'installer un ancien compilateur gcc</li></ul>
<p><br />
</p>
<ul><li> Configure vtk</li></ul>
<pre>
ls /auto/soft/FiniteEltSim
=&gt; build-vtk  openmpi-1.4.3  petsc-2.3.3-p16  vtk-v5.8.0

wget http://www.vtk.org/files/release/5.8/vtk-5.8.0.tar.gz

cd /auto/soft/FiniteEltSim/vtk-v5.8.0

env C=gcc CXX=g++ ccmake .

# Press c to configure
CMAKE_INSTALL_PREFIX /auto/soft/FiniteEltSim/vtk-v5.8.0-gnu4.8.5
# Set type to "Release"
# Enable qt
# Press c
# Press g
</pre>
<p>make
</p>
<ul><li> Build VTK</li></ul>
<p>Ne marche pas.
</p>
<h1><span class="mw-headline" id="Essai_d.27installation_avec_EasyBuild">Essai d'installation avec EasyBuild</span></h1>
<h2><span class="mw-headline" id="gcc_4.6.3">gcc 4.6.3</span></h2>
<p>ok
</p>
<h2><span class="mw-headline" id="openmpi_2">openmpi</span></h2>
<p>Seul la version 1.4.5 est disponible. On essaye avecc sinon il faudrat recompiler openmpi 1.4.3
</p><p>Si on souhaite la communication MPI, on doit installer les dépendances suivantes&#160;:
</p>
<pre>One or more OS dependencies were not found: [('libibverbs-dev', 'libibverbs-devel', 'rdma-core-devel')
</pre>
<p>Sinon on utilise ce paquet&#160;:
</p>
<pre>OpenMPI-1.4.5-GCC-4.6.3-no-OFED.eb
</pre>
<p>ok
</p>
<h2><span class="mw-headline" id="vtk_2">vtk</span></h2>
<pre>
module load  compiler/GCC/4.6.3  
export CMAKE_INSTALL_PREFIX=/auto/soft/EasyBuild/software/vtk

cd  /auto/soft/FiniteEltSim/
tar -jxf ~/Martin/vtk-v5.8.0.tar.bz2

mkdir -p /auto/soft/FiniteEltSim/vtk-build
cd vtk-build/

ccmake ../vtk-v5.8.0/
</pre>
<p>Faire les choix suivants&#160;:
</p>
<pre>
 BUILD_EXAMPLES                   OFF                                                                                         
 BUILD_SHARED_LIBS                OFF                                                                                         
 BUILD_TESTING                    OFF                                                                                         
 CMAKE_BACKWARDS_COMPATIBILITY    2.4                                                                                         
 CMAKE_BUILD_TYPE                 Debug                                                                                       
 CMAKE_INSTALL_PREFIX             /auto/soft/EasyBuild/software/vtk                                                                    
 VTK_DATA_ROOT                    /auto/soft/FiniteEltSim/vtk-v5.8.0                                                   
 VTK_EXTRA_COMPILER_WARNINGS	  OFF                                                                                         
 VTK_LARGE_DATA_ROOT              VTK_LARGE_DATA_ROOT-NOTFOUND                                                                
 VTK_USE_INFOVIS                  OFF                                                                                         
 VTK_USE_N_WAY_ARRAYS             OFF                                                                                         
 VTK_USE_PARALLEL                 OFF                                                                                         
 VTK_USE_QT                       OFF                                                                                         
 VTK_USE_RENDERING                OFF                                                                                         
 VTK_USE_TEXT_ANALYSIS            OFF                                                                                         
 VTK_WRAP_JAVA                    OFF                                                                                         
 VTK_WRAP_PYTHON                  OFF                                                                                         
 VTK_WRAP_PYTHON_SIP              OFF                                                                                         
 VTK_WRAP_TCL                     OFF       
</pre>
<p>Corrigé le fichier vtk-v5.8.0/Utilities/vtkhdf5/ConfigureChecks.cmake pour hdf5&#160;:
</p>
<pre>
 
78c78
&lt; IF (CMAKE_SYSTEM MATCHES "Linux")
---
&gt; IF (CMAKE_SYSTEM MATCHES "Linux-([3-9]\\.[0-9]|2\\.[4-9])\\.")
85c85
&lt; ENDIF (CMAKE_SYSTEM MATCHES "Linux")
---
&gt; ENDIF (CMAKE_SYSTEM MATCHES "Linux-([3-9]\\.[0-9]|2\\.[4-9])\\.")

</pre>
<pre>
make

...
[ 99%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLRectilinearGridWriter.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLShader.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLStructuredDataReader.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLStructuredDataWriter.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLStructuredGridReader.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLStructuredGridWriter.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLUnstructuredDataReader.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLUnstructuredDataWriter.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLUnstructuredGridReader.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLUnstructuredGridWriter.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLUtilities.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLWriter.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXMLWriterC.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkXYZMolReader.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkZLibDataCompressor.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkRowQueryToTable.cxx.o
[100%] Building CXX object IO/CMakeFiles/vtkIO.dir/vtkIOInstantiator.cxx.o
Linking CXX static library ../bin/libvtkIO.a
[100%] Built target vtkIO
</pre>
<pre>
make install

...
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXMLUnstructuredDataWriter.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXMLUnstructuredGridReader.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXMLUnstructuredGridWriter.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXMLUtilities.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXMLWriter.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXMLWriterC.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkXYZMolReader.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkZLibDataCompressor.h
-- Installing: /auto/soft/EasyBuild/vtk/include/vtk-5.8/vtkRowQueryToTable.h
-- Installing: /auto/soft/EasyBuild/vtk/lib/vtk-5.8/vtkIOKit.cmake
-- Installing: /auto/soft/EasyBuild/vtk/lib/vtk-5.8/VTKTargets.cmake
-- Installing: /auto/soft/EasyBuild/vtk/lib/vtk-5.8/VTKTargets-debug.cmake
-- Installing: /auto/soft/EasyBuild/vtk/lib/vtk-5.8/VTKConfig.cmake
-- Installing: /auto/soft/EasyBuild/vtk/lib/vtk-5.8/VTKConfigVersion.cmake
</pre>
<h2><span class="mw-headline" id="openmpi_3">openmpi</span></h2>
<pre>module load mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED
</pre>
<h2><span class="mw-headline" id="petsc_2">petsc</span></h2>
<pre>

cd /auto/soft/FiniteEltSim
tar -zxf ~/Martin/petsc-2.3.3.tar.gz 
cd petsc-2.3.3-p16
</pre>
<pre>
export PETSC_DIR=/auto/soft/FiniteEltSim/petsc-2.3.3-p16
export PETSC_ARCH=linux-gnu-c-debug

./config/configure.py --download-f-blas-lapack=1 --with-shared=1 --prefix=/auto/soft/EasyBuild/software/petsc

=================================================================================
             Configuring PETSc to compile on your system                         
=================================================================================
=================================================================================                                                                                                                                                                  Compiling FBLASLAPACK; this may take several minutes                                                                                                                                                                                   =================================================================================                                                                                                                                                                                                                                                                                                                                                                                                         
Compilers:                                                                                                                                                                                                                                   
  C Compiler:         mpicc  -fPIC -Wall -Wwrite-strings -Wno-strict-aliasing -g3 
  Fortran Compiler:   mpif90  -I. -fPIC -Wall -Wno-unused-variable -g  
Linkers:
  Shared linker:   mpicc  -shared  -fPIC -Wall -Wwrite-strings -Wno-strict-aliasing -g3 
  Dynamic linker:   mpicc  -shared  -fPIC -Wall -Wwrite-strings -Wno-strict-aliasing -g3 
PETSc:
  PETSC_ARCH: linux-gnu-c-debug
  PETSC_DIR: /auto/store/tmssoft/Martin/petsc-2.3.3-p16
  **
  ** Now build and test the libraries with "make all test"
  **
  Clanguage: C
  Scalar type:real
  PETSc shared libraries: enabled
  PETSc dynamic libraries: disabled
MPI:
  Includes: ['.', '/auto/soft/EasyBuild/software/mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED/include', '/auto/soft/EasyBuild/software/mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED/lib']
X11:
  Includes: ['']
  Library: ['-lX11']
BLAS/LAPACK: -Wl,-rpath,/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -L/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -lflapack -Wl,-rpath,/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -L/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -lfblas

</pre>
<pre>
make all

...
libfast in: /auto/store/tmssoft/Martin/petsc-2.3.3-p16/src/fortran
libfast in: /auto/store/tmssoft/Martin/petsc-2.3.3-p16/src/fortran/fsrc
mpif90 -c  -I. -fPIC -Wall -Wno-unused-variable -g   -I/auto/store/tmssoft/Martin/petsc-2.3.3-p16 -I/auto/store/tmssoft/Martin/petsc-2.3.3-p16/bmake/linux-gnu-c-debug -I/auto/store/tmssoft/Martin/petsc-2.3.3-p16/include  -I. -I/auto/soft/EasyBuild/software/mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED/include -I/auto/soft/EasyBuild/software/mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED/lib        -o somefort.o somefort.F
/bin/ar cr /auto/store/tmssoft/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetsc.a somefort.o
libfast in: /auto/store/tmssoft/Martin/petsc-2.3.3-p16/include
libfast in: /auto/store/tmssoft/Martin/petsc-2.3.3-p16/include/finclude
Completed building libraries
=========================================
making shared libraries in /auto/store/tmssoft/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug
building libpetsc.so
building libpetscvec.so
building libpetscmat.so
building libpetscdm.so
building libpetscksp.so
building libpetscsnes.so
building libpetscts.so
building libpetsccontrib.so
</pre>
<pre>
[tmssoft@bolo10 petsc-2.3.3-p16]$ make install
Installing PETSc at /auto/soft/EasyBuild/software/petsc
making shared libraries in /auto/soft/EasyBuild/software/petsc/lib/linux-gnu-c-debug
building libpetsc.so
building libpetscvec.so
building libpetscmat.so
building libpetscdm.so
building libpetscksp.so
building libpetscsnes.so
building libpetscts.so
building libpetsccontrib.so
sh/bash: PETSC_DIR=/auto/soft/EasyBuild/software/petsc; export PETSC_DIR
csh/tcsh: setenv PETSC_DIR /auto/soft/EasyBuild/software/petsc
Then do make test to verify correct install

</pre>
<h2><span class="mw-headline" id="libmesh-third_2">libmesh-third</span></h2>
<pre>
module purge
module load  compiler/GCC/4.6.3
module load mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED

export VTK_DIR=/auto/soft/EasyBuild/software/vtk

export LD_LIBRARY_PATH=/auto/soft/EasyBuild/software/mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED/lib/::/auto/soft/EasyBuild/software/petsc/lib/linux-gnu-c-debug:/auto/soft/EasyBuild/software/vtk/lib/vtk-5.8/:/auto/soft/FiniteEltSim/libmesh-third/include/mesh/

export INCLUDE_PATH=/auto/soft/EasyBuild/software/vtk/include/vtk-5.8/

cd /auto/soft/FiniteEltSim
unzip ~/Martin/libmesh-third.zip 
cd libmesh-third/

PETSC_DIR=/auto/soft/EasyBuild/software/petsc; export PETSC_DIR
export PETSC_ARCH=linux-gnu-c-debug
</pre>
<p>Attention bien vérifier les flags dans Make.common&#160;:
</p>
<pre>
# Flag for optional packages
enable-optional      = yes
enable-laspack	     = yes
enable-metis	     = yes
enable-parmetis	     = yes
enable-sfcurves	     = yes
enable-gzstream      = no
enable-tetgen        = yes
enable-triangle      = yes
enable-gmv           = yes
enable-vtk           = yes
enable-exodus	     = yes
enable-netcdf	     = yes
enable-nemesis	     = yes
enable-libhilbert    = yes

</pre>
<p><br />
</p>
<pre>

./configure --enable-vtk --enable-amr --enable-second --enable-exodus --with-vtk-include=/auto/soft/EasyBuild/software/vtk/include/vtk-5.8/ --with-vtk-lib=/auto/soft/EasyBuild/software/vtk/lib/vtk-5.8/ --prefix=/auto/soft/Easybuild/software/libmesh-third

...
&lt;&lt;&lt; Configuring library with libHilbert support &gt;&gt;&gt;
----------------------------------------------
--- Done configuring for optional packages ---
----------------------------------------------
checking for perl... /bin/perl
configure: creating ./config.status
config.status: creating Make.common
config.status: creating doc/Doxyfile
config.status: creating contrib/bin/libmesh-config
config.status: creating contrib/bin/xda2mgf
config.status: creating contrib/bin/create_libmesh_release
config.status: creating doc/dot
config.status: creating include/base/libmesh_contrib_config.h
config.status: creating include/base/libmesh_config.h.tmp
config.status: executing include/base/libmesh_config.h commands
config.status: creating include/base/libmesh_config.h - prefix LIBMESH for include/base/libmesh_config.h.tmp defines
---------------------------------------------
--------- Done Configuring libMesh ----------
---------------------------------------------
</pre>
<pre>
make

Compiling C++ (in optimized mode) src/partitioning/partitioner_factory.C...
Compiling C++ (in optimized mode) src/partitioning/sfc_partitioner.C...
Compiling C++ (in optimized mode) src/partitioning/metis_partitioner.C...
Compiling C++ (in optimized mode) src/partitioning/partitioner.C...
Compiling C++ (in optimized mode) src/partitioning/centroid_partitioner.C...
Compiling C++ (in optimized mode) src/partitioning/parmetis_partitioner.C...
Compiling C++ (in optimized mode) src/partitioning/linear_partitioner.C...
Compiling C++ (in optimized mode) src/solvers/euler2_solver.C...
Compiling C++ (in optimized mode) src/solvers/unsteady_solver.C...
Compiling C++ (in optimized mode) src/solvers/adaptive_time_solver.C...
...
@mpicxx -DNDEBUG -O2 -felide-constructors -fPIC -funroll-loops -fstrict-aliasing -DPETSC_USE_DYNAMIC_LIBRARIES src/apps/amr.o -o bin/amr /auto/store/tmssoft/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt/libmesh.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/liblaspack.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libparmetis.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libmetis.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libsfcurves.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libgmv.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libtetgen.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libtriangle.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libexodusii.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libnetcdf.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libnemesis.so /auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libHilbert.so -L/auto/soft/EasyBuild/software/petsc/lib/linux-gnu-c-debug -lpetscsnes -lpetscksp -lpetscdm -lpetscmat -lpetscvec -lpetscsnes -lpetsc -lX11 -Wl,-rpath,/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -L/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -lflapack -Wl,-rpath,/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -L/auto/store/tmssoft/Martin/petsc-2.3.3-p16/externalpackages/fblaslapack/linux-gnu-c-debug -lfblas -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib64/../lib64 -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib/../lib64 -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib/gcc/x86_64-unknown-linux-gnu/4.6.3 -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib/gcc/x86_64-unknown-linux-gnu/4.6.3/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/auto/soft/EasyBuild/software/mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED/lib -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib64 -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib -L/auto/soft/EasyBuild/software/compiler/GCC/4.6.3/lib/gcc/x86_64-unknown-linux-gnu/4.6.3/../../.. -lgfortran -lm -lquadmath -Wl,-rpath,/auto/store/tmssoft/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/soft/EasyBuild/software/petsc/lib/linux-gnu-c-debug -Wl,-rpath,/auto/store/tmssoft/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/store/tmssoft/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt -Wl,-rpath,/auto/soft/EasyBuild/software/petsc/lib/linux-gnu-c-debug
</pre>
<pre>
[tmssoft@bolo10 libmesh-third]$ ls -ltr bin/
total 4072
-rw------- 1 tmssoft users 904101 Feb  5 11:28 amr-devel
-rw------- 1 tmssoft users 656833 Feb  5 11:28 compare-devel
-rw------- 1 tmssoft users 906951 Feb  5 11:28 meshtool-devel
-rw------- 1 tmssoft users   6997 Feb  5 11:28 parameterize.pl
-rw------- 1 tmssoft users 964246 Feb  5 11:28 grid2grid-devel
-rwxr-xr-x 1 tmssoft users 161376 Feb 28 22:19 compare
-rwxr-xr-x 1 tmssoft users 212240 Feb 28 22:19 grid2grid
-rwxr-xr-x 1 tmssoft users 171528 Feb 28 22:19 meshtool
-rwxr-xr-x 1 tmssoft users 171144 Feb 28 22:19 amr

</pre>
<p>IMPORTANT&#160;: si problème lors de la compilation, utiliser mpic++ pour la dernière étape sinon on rencontre des problèmes dans l'édition de liens
</p>
<pre>
mpic++ ...
</pre>
<h2><span class="mw-headline" id="simulation_2">simulation</span></h2>
<p>Modifier les chemins dans le makefile
</p>
<pre>
export LIBRARY_PATH=/auto/soft/EasyBuild/software/vtk/lib/vtk-5.8/:$LIBRARY_PATH

make
</pre>
<p>On obtient l'executable&#160;: shrinking_sphere-opt
</p>
<pre>
[tmssoft@bolo10 simulation]$ ./shrinking_sphere-opt 
 Mesh Information:
  mesh_dimension()=2
  spatial_dimension()=3
  n_nodes()=2562
    n_local_nodes()=2562
  n_elem()=5120
    n_local_elem()=5120
    n_active_elem()=5120
  n_subdomains()=1
  n_processors()=1
  processor_id()=0

Replacing ShellSystem DOF map with Subdiv DOF map
DOF_MAP updated
Replacing ShellMeasurementSystem DOF map with Subdiv DOF map
DOF_MAP updated
Initializing equation system
Number of ghosts: 5120
obj_voxel_map.resize

</pre>
<p>Les dépendances de l'executable binaire 
</p>
<pre>
ldd Martin/simulation/shrinking_sphere-opt 
	linux-vdso.so.1 =&gt;  (0x00007fff969e3000)
	/auto/store/fpascale/Martin/libmesh-third/lib/x86_64-unknown-linux-gnu_opt/libmesh.so (0x00007f777fa7b000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/liblaspack.so (0x00007f777f85b000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libparmetis.so (0x00007f777f5f3000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libmetis.so (0x00007f777f378000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libsfcurves.so (0x00007f777f175000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libgmv.so (0x00007f777ef59000)
	libvtkIO.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkIO.so.5.8 (0x00007f777e6d5000)
	libvtkCommon.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkCommon.so.5.8 (0x00007f777e10f000)
	libvtkFiltering.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkFiltering.so.5.8 (0x00007f777d98a000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libtetgen.so (0x00007f777d6cf000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libtriangle.so (0x00007f777d4a7000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libexodusii.so (0x00007f777d263000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libnetcdf.so (0x00007f777d01c000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libnemesis.so (0x00007f777cdff000)
	/auto/store/fpascale/Martin/libmesh-third/contrib/lib/x86_64-unknown-linux-gnu_opt/libHilbert.so (0x00007f777cbe5000)
	libpetscsnes.so =&gt; /auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetscsnes.so (0x00007f777c98c000)
	libpetscksp.so =&gt; /auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetscksp.so (0x00007f777c479000)
	libpetscdm.so =&gt; /auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetscdm.so (0x00007f777c1d9000)
	libpetscmat.so =&gt; /auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetscmat.so (0x00007f777bc39000)
	libpetscvec.so =&gt; /auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetscvec.so (0x00007f777b94d000)
	libpetsc.so =&gt; /auto/store/fpascale/Martin/petsc-2.3.3-p16/lib/linux-gnu-c-debug/libpetsc.so (0x00007f777b603000)
	libX11.so.6 =&gt; /lib64/libX11.so.6 (0x00007f777b2c5000)
	libgfortran.so.3 =&gt; /lib64/libgfortran.so.3 (0x00007f777afa3000)
	libquadmath.so.0 =&gt; /lib64/libquadmath.so.0 (0x00007f777ad67000)
	libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007f777aa60000)
	libmpi_cxx.so.0 =&gt; not found
	libmpi.so.0 =&gt; not found
	libopen-rte.so.0 =&gt; not found
	libopen-pal.so.0 =&gt; not found
	libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f777a85c000)
	libnsl.so.1 =&gt; /lib64/libnsl.so.1 (0x00007f777a642000)
	libutil.so.1 =&gt; /lib64/libutil.so.1 (0x00007f777a43f000)
	libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f777a13d000)
	libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f7779f27000)
	libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f7779d0b000)
	libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f777993e000)
	libvtkDICOMParser.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkDICOMParser.so.5.8 (0x00007f77796f8000)
	libvtkNetCDF.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkNetCDF.so.5.8 (0x00007f7779417000)
	libvtkNetCDF_cxx.so =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkNetCDF_cxx.so (0x00007f77791f8000)
	libvtkmetaio.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkmetaio.so.5.8 (0x00007f7778f0d000)
	libvtksqlite.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtksqlite.so.5.8 (0x00007f7778c7b000)
	libvtkpng.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkpng.so.5.8 (0x00007f7778a48000)
	libvtkzlib.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkzlib.so.5.8 (0x00007f777882e000)
	libvtkjpeg.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkjpeg.so.5.8 (0x00007f7778601000)
	libvtktiff.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtktiff.so.5.8 (0x00007f7778393000)
	libvtkexpat.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtkexpat.so.5.8 (0x00007f7778163000)
	libvtksys.so.5.8 =&gt; //auto/store/fpascale/Martin/vtk-v5.8.0/local/lib/vtk-5.8/libvtksys.so.5.8 (0x00007f7777efb000)
	libmpi.so.0 =&gt; /auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib/libmpi.so.0 (0x00007f7777c50000)
	libopen-rte.so.0 =&gt; /auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib/libopen-rte.so.0 (0x00007f7777a02000)
	libopen-pal.so.0 =&gt; /auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib/libopen-pal.so.0 (0x00007f77777ac000)
	libmpi_f90.so.0 =&gt; /auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib/libmpi_f90.so.0 (0x00007f77775a8000)
	libmpi_f77.so.0 =&gt; /auto/store/fpascale/Martin/openmpi-1.4.3-gcc4.6.3/lib/libmpi_f77.so.0 (0x00007f7777375000)
	libxcb.so.1 =&gt; /lib64/libxcb.so.1 (0x00007f777714d000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f778036f000)
	libXau.so.6 =&gt; /lib64/libXau.so.6 (0x00007f7776f49000)
</pre>
<p><br />
</p>
<h1><span class="mw-headline" id="Compilation_du_code">Compilation du code</span></h1>
<pre>
source /auto/soft/FiniteEltSim/env.sh
module load EasyBuild
module load compiler/GCC/4.6.3
module load mpi/OpenMPI/1.4.5-GCC-4.6.3-no-OFED
cd /auto/soft/FiniteEltSim/simulation/
make
chmod 770 /auto/soft/FiniteEltSim/simulation/shrinking_sphere-opt
</pre>




</body></html>