<html>
<head><title>Mvapich2</title></head>
<body>
<h1>Mvapich2</h1><p>mvapich2
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#What_is_MVAPICH.2FMVAPICH2.3F"><span class="tocnumber">1</span> <span class="toctext">What is MVAPICH/MVAPICH2?</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#User_guide"><span class="tocnumber">2</span> <span class="toctext">User guide</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#requirements"><span class="tocnumber">3</span> <span class="toctext">requirements</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Installation"><span class="tocnumber">4</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#t.C3.A9lechargement_des_sources_et_patches"><span class="tocnumber">4.1</span> <span class="toctext">télechargement des sources et patches</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Installation_des_pr.C3.A9-requis_logiciels_OS"><span class="tocnumber">4.1.1</span> <span class="toctext">Installation des pré-requis logiciels OS</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Version_2.2"><span class="tocnumber">4.1.2</span> <span class="toctext">Version 2.2</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Version_2.3"><span class="tocnumber">4.1.3</span> <span class="toctext">Version 2.3</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Compilation_intel_tcp"><span class="tocnumber">4.2</span> <span class="toctext">Compilation intel tcp</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Configuring_a_build_for_TCP.2FIP-CH3"><span class="tocnumber">4.2.1</span> <span class="toctext">Configuring a build for TCP/IP-CH3</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Compilation_et_installation"><span class="tocnumber">4.2.2</span> <span class="toctext">Compilation  et installation</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Compilation_intel_Omni-path"><span class="tocnumber">4.3</span> <span class="toctext">Compilation intel Omni-path</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Configuring_a_build_for_Intel_Omni-Path_.28PSM2-CH3.29"><span class="tocnumber">4.3.1</span> <span class="toctext">Configuring a build for Intel Omni-Path (PSM2-CH3)</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#Compilation_intel_.2B_slurm17"><span class="tocnumber">4.4</span> <span class="toctext">Compilation intel + slurm17</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="What_is_MVAPICH.2FMVAPICH2.3F">What is MVAPICH/MVAPICH2?</span></h1>
<p>MVAPICH is a high performance implementation of MPI-1 over InfiniBand and RDMAoE based on MPICH1. MVAPICH2 is a high performance MPI-2 implementation for InfiniBand, Omni-Path, Ethernet/iWARP, and RoCE based on MPICH2. High performance, scalable and fault-tolerance support are provided in these packages. These packages provide multiple underlying support (such as OpenFabrics/Gen2, OpenFabrics/Gen2-Hybrid, OpenFabrics-RDMAoE, QLogic-InfiniPath, and the standard TCP/IP) for portability across multiple networks.
</p>
<h1><span class="mw-headline" id="User_guide">User guide</span></h1>
<p><a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://mvapich.cse.ohio-state.edu/static/media/mvapich/mvapich2-x-2.2-userguide.html">http://mvapich.cse.ohio-state.edu/static/media/mvapich/mvapich2-x-2.2-userguide.html</a>
</p>
<h1><span class="mw-headline" id="requirements">requirements</span></h1>
<pre>
Intel® MPI Library fabric support

The supported fabric environment for the Intel® MPI Library changed already with version 2017 Update 1. There, the supported fabrics migrated to the Open Fabrics Interfaces (OFI) framework for all underlying devices, while DAPL, TMI, and OFA fabrics were deprecated. Fur further details on the hardware and software requirements from the Intel MPI® library, please have a look at the release notes.
What is libfabric?

The Open Fabrics Interfaces1 (OFI) is a framework focused on exporting fabric communication services to applications. One of such applications is the Intel MPI® library, allowing users to utilize the libfabric communication services via the common MPI standard.

See the OFI web site for more details. This URL includes a description and overview of the project and detailed documentation for the libfabric APIs.
Installing libfabric

One can either install libfabric directly from the Intel Intel® Omni-Path Fabric Software package or build and compile it manually from the GitHub* repository.
Installing libfabric with the Intel® Omni-Path Fabric Software package

The Intel® Omni-Path Fabric Software package versions 10.5 and later already contain the libfabric libraries.
</pre>
<h1><span class="mw-headline" id="Installation">Installation</span></h1>
<h2><span class="mw-headline" id="t.C3.A9lechargement_des_sources_et_patches">télechargement des sources et patches</span></h2>
<h3><span class="mw-headline" id="Installation_des_pr.C3.A9-requis_logiciels_OS">Installation des pré-requis logiciels OS</span></h3>
<pre>
yum install libpsm2-devel libfabric libpsm2-devel opa-basic-tools rdma-core libpsm2 opa-fastfabric opa-address-resolution byacc
</pre>
<h3><span class="mw-headline" id="Version_2.2">Version 2.2</span></h3>
<pre>
wget http://mvapich.cse.ohio-state.edu/download/mvapich/mv2/mvapich2-2.2.tar.gz
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="Version_2.3">Version 2.3</span></h3>
<p>Source&#160;:
</p>
<pre>
wget http://mvapich.cse.ohio-state.edu/download/mvapich/mv2/mvapich2-2.3.tar.gz
</pre>
<ul><li>Patches</li></ul>
<p>Patch to add PMI Extensions with SLURM 17
</p>
<pre>
wget http://mvapich.cse.ohio-state.edu/download/mvapich/osu-shmempmi-slurm-17.02.2.patch
</pre>
<p><br />
Patch to add PMI Extensions with SLURM 18
</p>
<pre>
wget http://mvapich.cse.ohio-state.edu/download/mvapich/osu-shmempmi-slurm-18.08.3.patch
</pre>
<h2><span class="mw-headline" id="Compilation_intel_tcp">Compilation intel tcp</span></h2>
<h3><span class="mw-headline" id="Configuring_a_build_for_TCP.2FIP-CH3">Configuring a build for TCP/IP-CH3</span></h3>
<pre>
ssh cns12
module load compiler/intel17/u7
./configure --prefix=/auto/soft/mvapich/2.2-intel17u7-tcp   --with-device=ch3:sock  --disable-shared CC=icc CXX=icpc  FC=ifort

...
-----------------------------------------------------------------------------
Hwloc optional build support status (more details can be found above):

Probe / display I/O devices: PCI(linux)
Graphical output (Cairo):    
XML input / output:          basic
libnuma memory support:      no
Plugin support:              no
-----------------------------------------------------------------------------

Configuration completed.
</pre>
<h3><span class="mw-headline" id="Compilation_et_installation">Compilation  et installation</span></h3>
<pre>
make -j 6
make install
</pre>
<h2><span class="mw-headline" id="Compilation_intel_Omni-path">Compilation intel Omni-path</span></h2>
<h3><span class="mw-headline" id="Configuring_a_build_for_Intel_Omni-Path_.28PSM2-CH3.29">Configuring a build for Intel Omni-Path (PSM2-CH3)</span></h3>
<pre>
./configure --prefix=/auto/soft/mvapich/2.2-intel17u7-opa --with-device=ch3:psm --disable-shared  CC=icc CXX=icpc  FC=ifort

...
configure: creating ./config.status
config.status: creating Makefile
config.status: creating include/Makefile
config.status: creating src/Makefile
config.status: creating include/private/autogen/config.h
config.status: include/private/autogen/config.h is unchanged
config.status: creating include/hwloc/autogen/config.h
config.status: include/hwloc/autogen/config.h is unchanged
config.status: executing depfiles commands
config.status: executing libtool commands

-----------------------------------------------------------------------------
Hwloc optional build support status (more details can be found above):

Probe / display I/O devices: PCI(linux)
Graphical output (Cairo):    
XML input / output:          basic
libnuma memory support:      no
Plugin support:              no
-----------------------------------------------------------------------------

Configuration completed.

</pre>
<h2><span class="mw-headline" id="Compilation_intel_.2B_slurm17">Compilation intel + slurm17</span></h2>
<p>Ap
</p>
<pre>
module load compiler/intel17/u7

CC=icc CXX=icc  FC=ifort ./configure --prefix=/auto/soft/mvapich/2.2-intel17u7  --with-pm=slurm --with-device=ch3:psm --with-slurm-include=/opt/slurm/include/ --with-slurm-lib=/opt/slurm/lib --host=x86_64

make -j 6
make install
</pre>




</body></html>